{% extends 'base.html.twig' %}

{% block title %}Mon panier - La Boutique  {% endblock %}

{% block content %}

    <h1>Mon panier</h1>
    Retrouvez l'ensemble des produits que vous avez ajouté dans votre panier.

    {# {{ dump(panier) }} #}
    <table class="table mt-3">
        <thead>
        <tr>
            <th scope="col">Produit</th>
            <th scope="col">Quantité</th>
            <th scope="col">Prix</th>
            <th scope="col">Total</th>
        </tr>
        </thead>
        <tbody>
        {% set total = null %}
        {% for produit in panier %}
            {# {{  dump(produit)}} #}
            <tr>
                <th>
                    <img src="/uploads/{{ produit.product.illustration }}" alt="{{ produit.product.nom }}"
                         height="75px"><br>
                </th>
                <td>{{ produit.product.nom }}
                    <small>{{ produit.product.subtitle }}</small>
                </td>
                <td>x {{ produit.quantity }}</td>
                <td>{{ (produit.product.prix * produit.quantity/ 100) | number_format(2, ',', '.') }} €</td>

            </tr>
            {%  set total = total + (produit.product.prix * produit.quantity) %}
        {% endfor %}
        </tbody>
    </table>

    <div class="text-right mb-5">
      <b>  Nombre de produit : {{ panier|length }}</b><br>
      <b> Total : </b>{{ (total/ 100) | number_format(2, ',', '.') }} €<br>

      <a href="" class="btn btn-success ">Valider mon panier</a>
    </div>
{% endblock %}
